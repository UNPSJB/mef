<h1 class="mt-4">Pedido de Replicación Nº {{id}} - Finalizar Pedido</h1>
<span class="bg-warning form-control">{{accion}} el siguiente pedido</span>
<form action="/pedidos/{{accion}}/{{id}}" method="post">
  <div class="my-4">Fecha Finalización de Replica</div>
  <input class="form-control" type="date" name="fecha_fin" id="InputFechaFinalizacion" required>
  <button type="button" class="btn btn-info my-4" data-toggle="modal" data-target="#myModal">
    Ver Detalle
  </button>
  <br>
  <!-- Botón de Finalizar -->
  <div class="row justify-content-center">
    <div class="col-6 text-center">
      <button type="submit" class="btn btn-success btn-lg">Finalizar Replicación</button>
    </div>
  </div>
</form>

<div class="modal fade" id="myModal">
  <div class="modal-dialog modal-xl">
    <div class="modal-content modal-xl">
      <!-- Modal body -->
      <div class="modal-body">
        {{> replica/detalle detalles}}
      </div>
      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<!-- Setea la fecha actual como fecha máxima de "finalización" -->
<script>
  $(document).ready(function () {
    var hoy = formatDate(new Date());
    document.getElementById("InputFechaFinalizacion").setAttribute("max", hoy);
    $("#InputFechaFinalizacion").attr("max", hoy);
  })
  function formatDate(date) {
    var d = new Date(date),
      month = '' + (d.getMonth() + 1),
      day = '' + d.getDate(),
      year = d.getFullYear()
    if (month.length < 2)
      month = '0' + month;
    if (day.length < 2)
      day = '0' + day;
    return [year, month, day].join('-');
  }
</script>